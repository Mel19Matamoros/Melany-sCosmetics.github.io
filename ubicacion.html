<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Melany's Cosmetics</title> 
        <link rel="icon" href="Imagenes/Logo Melany's Cosmetics.PNG" type="image/x-icon">
        <link rel="stylesheet" href="style.css">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js'></script>
        <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css' rel='stylesheet' />
    </head>

    <body>
        <header>
          <div class="contain-header">
            <img src="Imagenes/Logo Melany's Cosmetics.PNG" alt="Logo">
            <h1 id="animacion-header">Melany's Cosmetics</h1>
          </div>
        </header>

        <nav class="navbar navbar-expand-lg bg-rosado" id="navbar">
          <div class="container-fluid" id="menu">
              <button class="setting-btn d-lg-none" type="button" data-bs-toggle="collapse"
                  data-bs-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02" aria-expanded="false"
                  aria-label="Toggle navigation">
                  <span class="bar bar1"></span>
                  <span class="bar bar2"></span>
                  <span class="bar bar1"></span>
              </button>

              <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
                  <ul class="navbar-nav mb-2 mb-lg-0">
                      <li class="nav-item" id="elementos">
                          <a class="nav-link active" id="elementos" aria-current="page" href="index.html">Inicio</a>
                      </li>
                      <li class="nav-item" id="elementos">
                          <a class="nav-link active" id="elementos" href="productos.html">Productos</a>
                      </li>
                      <li class="nav-item">
                          <a class="nav-link active" id="elementos" href="contacto.html">Contacto</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link active" id="elementos" href="acercaDe.html">Acerca de</a>
                      </li>
                      <li class="nav-item">
                      <a class="nav-link active" id="elementos" href="ubicacion.html">Sucursal</a>
                      </li>
                  </ul>
              </div>
          </div>
        </nav>

        <div class="contenedor-info-map">
        <h2>Información de Ruta</h2>
        <p>Tiempo estimado de llegada: <strong><span id="eta"></span></strong></p>
        </div>
        <div id='map'></div>
      
    <script>
    mapboxgl.accessToken = 'pk.eyJ1Ijoia2NoYXZlcyIsImEiOiJjbG8zM3ZkNXoxcHZ3MmxxZWl1a3NhYmh2In0.2i7RGPqWoXmnaQizvPGXvQ'; 

    // Obtener ubicación del usuario
    navigator.geolocation.getCurrentPosition(function(position) {
    var userLocation = [position.coords.longitude, position.coords.latitude];

    // Crear un mapa centrado en la ubicación del usuario
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/satellite-v9', // Estilo satelital
        center: userLocation,
        zoom: 15
    });

    // Agregar marcador personalizado para la ubicación del usuario
    new mapboxgl.Marker({ color: 'blue' }) // Puedes cambiar el color o usar una imagen personalizada
        .setLngLat(userLocation)
        .addTo(map);

    // Coordenadas de la sucursal de la empresa 
    var empresaLocation = [-84.2996489221693, 10.120389159553955]; 

    // Agregar marcador personalizado para el destino
    map.loadImage(
        'https://docs.mapbox.com/mapbox-gl-js/assets/custom_marker.png',
        function(error, image) {
            if (error) throw error;
            map.addImage('custom-marker', image);
            map.addLayer({
                id: 'destination',
                type: 'symbol',
                source: {
                    type: 'geojson',
                    data: {
                        type: 'FeatureCollection',
                        features: [{
                            type: 'Feature',
                            geometry: {
                                type: 'Point',
                                coordinates: empresaLocation
                            }
                        }]
                    }
                },
                layout: {
                    'icon-image': 'custom-marker',
                    'icon-size': 0.5
                }
            });
        }
    );

    // Calcular ruta desde la ubicación del usuario hasta la sucursal
    map.on('load', function() {
    var directionsRequest = 'https://api.mapbox.com/directions/v5/mapbox/driving/' +
        userLocation[0] + ',' + userLocation[1] + ';' +
        empresaLocation[0] + ',' + empresaLocation[1] +
        '?steps=true&geometries=geojson&alternatives=true&access_token=' + mapboxgl.accessToken;

    fetch(directionsRequest)
        .then(response => response.json())
        .then(data => {
            // Obtener la ruta más corta (primera en la lista de alternativas)
            var route = data.routes[0];

            // Calcular el tiempo estimado de llegada (ETA) y la distancia de la ruta principal
            var duration = route.duration / 60; // Duración en minutos

            // Mostrar el tiempo estimado de llegada y la distancia en el DOM
            var etaText = (duration >= 1) ? Math.round(duration) + ' minutos' : '1 minuto';
            document.getElementById('eta').textContent = etaText;

            // Mostrar la ruta en el mapa
            map.addLayer({
                id: 'route',
                type: 'line',
                source: {
                    type: 'geojson',
                    data: {
                        type: 'Feature',
                        properties: {},
                        geometry: route.geometry
                    }
                },
                layout: {
                    'line-join': 'round',
                    'line-cap': 'round'
                },
                paint: {
                    'line-color': '#3887be',
                    'line-width': 8
                }
            });
        });
      });
    });
    </script>

        <footer class="footer">
          <div class="container-footer">
              <div class="footer-info">
                  <h3>Sobre Melany's Cosmetics</h3>
                  <p>Nuestra pasión por el maquillaje nos impulsa a ofrecerte 
                    una selección única de productos que realzan tu belleza natural
                    y te permiten expresar tu estilo personal. Descubre la autenticidad 
                    en cada producto que ofrecemos, diseñados con amor y cuidado para 
                    brindarte una experiencia de maquillaje excepcional.</p>
              </div>
              <div class="footer-contacto">
                  <h3>Contacto</h3>
                  <p>Correo electrónico: melanymatamoros19@gmail.com</p>
                  <p>Teléfono: (506) 6320-6544</p>
                  <p>Dirección: 50 metros de la iglesia Catolica del Cajon de Grecia, Grecia, Alajuela, Costa Rica</p>
              </div>
              <div class="footer-social">
                <h3>Síguenos</h3>
                <ul>
                  <li><a href="https://www.instagram.com/melany_matamoros_/"><img src="Imagenes/instagram_2111463.png" alt="Instagram"> Instagram</a></li>
                  <li><a href="https://www.facebook.com/melamatamoros/"><img src="Imagenes/facebook_5968764.png" alt="Facebook"> Facebook</a></li>
                  <li><a href="https://wa.me/50663206544"><img src="Imagenes/whatsapp_3670051.png" alt="Whatsapp"> Whatsapp</a></li>
                </ul>
              </div>
            <div class="linea-separadora"></div>
          </div>
          <div class="copyright">
            <p>&copy; 2024 Melany's Cosmetics. Todos los derechos reservados.</p>
          </div>
        </footer>

        <script src="script.js"></script>

        <!-- Enlace a Bootstrap JS y jQuery (requeridos para funcionalidad de la barra de navegación) -->
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
